--
-- PostgreSQL database dump
--

-- Dumped from database version 16.0
-- Dumped by pg_dump version 16.0

-- Started on 2023-11-02 03:26:29

SET statement_timeout = 0;
SET lock_timeout = 0;
SET idle_in_transaction_session_timeout = 0;
SET client_encoding = 'UTF8';
SET standard_conforming_strings = on;
SELECT pg_catalog.set_config('search_path', '', false);
SET check_function_bodies = false;
SET xmloption = content;
SET client_min_messages = warning;
SET row_security = off;

SET default_tablespace = '';

SET default_table_access_method = heap;

--
-- TOC entry 216 (class 1259 OID 16412)
-- Name: DiaryEntrys; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public."DiaryEntrys" (
    uuid uuid NOT NULL,
    author uuid NOT NULL,
    type text NOT NULL,
    heart_rate integer,
    blood_saturation integer,
    blood_preassure text,
    created_at timestamp with time zone NOT NULL,
    updated_at timestamp with time zone NOT NULL,
    deleted_at timestamp with time zone NOT NULL
);


ALTER TABLE public."DiaryEntrys" OWNER TO postgres;

--
-- TOC entry 217 (class 1259 OID 16430)
-- Name: IntakeItems; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public."IntakeItems" (
    uuid uuid NOT NULL,
    name text NOT NULL,
    calory_amount integer,
    tags text,
    state text DEFAULT 'solid'::text NOT NULL,
    weight integer,
    diary_entry uuid NOT NULL,
    created_at timestamp with time zone NOT NULL,
    updated_at timestamp with time zone NOT NULL,
    deleted_at timestamp with time zone NOT NULL
);


ALTER TABLE public."IntakeItems" OWNER TO postgres;

--
-- TOC entry 215 (class 1259 OID 16399)
-- Name: Users; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public."Users" (
    uuid uuid NOT NULL,
    name text,
    alias text NOT NULL,
    chat_id bigint NOT NULL,
    age integer,
    sex text,
    weight integer,
    "doctor_Id" uuid,
    subscription_end timestamp with time zone,
    subscription_start timestamp with time zone,
    created_at time with time zone NOT NULL,
    updated_at time with time zone NOT NULL,
    deleted_at time with time zone NOT NULL
);


ALTER TABLE public."Users" OWNER TO postgres;

--
-- TOC entry 4798 (class 0 OID 16412)
-- Dependencies: 216
-- Data for Name: DiaryEntrys; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public."DiaryEntrys" (uuid, author, type, heart_rate, blood_saturation, blood_preassure, created_at, updated_at, deleted_at) FROM stdin;
\.


--
-- TOC entry 4799 (class 0 OID 16430)
-- Dependencies: 217
-- Data for Name: IntakeItems; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public."IntakeItems" (uuid, name, calory_amount, tags, state, weight, diary_entry, created_at, updated_at, deleted_at) FROM stdin;
\.


--
-- TOC entry 4797 (class 0 OID 16399)
-- Dependencies: 215
-- Data for Name: Users; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public."Users" (uuid, name, alias, chat_id, age, sex, weight, "doctor_Id", subscription_end, subscription_start, created_at, updated_at, deleted_at) FROM stdin;
\.


--
-- TOC entry 4648 (class 2606 OID 16418)
-- Name: DiaryEntrys DiaryEntrys_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public."DiaryEntrys"
    ADD CONSTRAINT "DiaryEntrys_pkey" PRIMARY KEY (uuid);


--
-- TOC entry 4650 (class 2606 OID 16437)
-- Name: IntakeItems IntakeItems_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public."IntakeItems"
    ADD CONSTRAINT "IntakeItems_pkey" PRIMARY KEY (uuid);


--
-- TOC entry 4643 (class 2606 OID 16552)
-- Name: IntakeItems State; Type: CHECK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE public."IntakeItems"
    ADD CONSTRAINT "State" CHECK ((state = ANY (ARRAY['solid'::text, 'liquid'::text]))) NOT VALID;


--
-- TOC entry 4642 (class 2606 OID 16553)
-- Name: DiaryEntrys Type; Type: CHECK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE public."DiaryEntrys"
    ADD CONSTRAINT "Type" CHECK ((type = ANY (ARRAY['intake_item'::text, 'heart_rate'::text, 'blood_saturation'::text, 'blood_preassure'::text]))) NOT VALID;


--
-- TOC entry 4645 (class 2606 OID 16405)
-- Name: Users Users_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public."Users"
    ADD CONSTRAINT "Users_pkey" PRIMARY KEY (uuid);


--
-- TOC entry 4646 (class 1259 OID 16411)
-- Name: fki_DoctorIds; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX "fki_DoctorIds" ON public."Users" USING btree ("doctor_Id");


--
-- TOC entry 4652 (class 2606 OID 16419)
-- Name: DiaryEntrys Author; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public."DiaryEntrys"
    ADD CONSTRAINT "Author" FOREIGN KEY (author) REFERENCES public."Users"(uuid) MATCH FULL ON UPDATE CASCADE ON DELETE CASCADE;


--
-- TOC entry 4653 (class 2606 OID 16438)
-- Name: IntakeItems DiaryEntry; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public."IntakeItems"
    ADD CONSTRAINT "DiaryEntry" FOREIGN KEY (diary_entry) REFERENCES public."DiaryEntrys"(uuid) MATCH FULL ON UPDATE CASCADE ON DELETE CASCADE;


--
-- TOC entry 4651 (class 2606 OID 16406)
-- Name: Users DoctorIds; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public."Users"
    ADD CONSTRAINT "DoctorIds" FOREIGN KEY ("doctor_Id") REFERENCES public."Users"(uuid) MATCH FULL ON UPDATE CASCADE ON DELETE CASCADE;


-- Completed on 2023-11-02 03:26:29

--
-- PostgreSQL database dump complete
--

